{% extends "base.html" %}
{% block content %}
<h2>All Posts</h2>

{% for post in posts %}
<div class="post">
  <h3>
    <a href="{% url 'blog:post-detail' post.pk %}">{{ post.title }}</a>
  </h3>
  <p>
    {{ post.content|truncatewords:30 }}
    <a href="{% url 'blog:post-detail' post.pk %}">Read more</a>
  </p>
  <small>By {{ post.author }} on {{ post.published_date }}</small>

  {% if post.tags.all %}
  <p>
    Tags: 
    {% for tag in post.tags.all %}
      <a href="{% url 'blog:posts-by-tag' tag.name %}">{{ tag.name }}</a>{% if not forloop.last %}, {% endif %}
    {% endfor %}
  </p>
  {% endif %}
</div>
<hr />
{% empty %}
<p>No posts yet.</p>
{% endfor %}

{% endblock %}
